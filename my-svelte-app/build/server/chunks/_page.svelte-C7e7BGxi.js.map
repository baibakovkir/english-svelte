{"version":3,"file":"_page.svelte-C7e7BGxi.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/audio/_slug_/_page.svelte.js"],"sourcesContent":["import { c as create_ssr_component, o as onDestroy, v as validate_component, b as add_attribute, e as escape } from \"../../../../chunks/ssr.js\";\nimport { Howl } from \"howler\";\nimport { L as LinkAnimated } from \"../../../../chunks/LinkAnimated.js\";\nfunction getCurrentTimeToFormat(time) {\n  const minutes = Math.floor(time / 60);\n  const seconds = Math.floor(time % 60);\n  return `${minutes}:${seconds < 10 ? \"0\" : \"\"}${seconds}`;\n}\nconst Page = create_ssr_component(($$result, $$props, $$bindings, slots) => {\n  let { data } = $$props;\n  let volume = 0.5;\n  let duration = 0;\n  let currentTime = 0;\n  let intervalId;\n  const sound = new Howl({\n    src: [data.post.link],\n    html5: true,\n    volume,\n    onplay: () => {\n      intervalId = setInterval(\n        () => {\n          currentTime = sound.seek() + 0.01;\n        },\n        1e3\n      );\n    },\n    onpause: () => {\n      currentTime = sound.seek();\n    },\n    onend: () => {\n      currentTime = sound.seek();\n    },\n    onseek: () => {\n      currentTime = sound.seek();\n    },\n    onload: () => {\n      duration = sound.duration();\n    },\n    onmute: () => {\n      isMuted();\n    }\n  });\n  function isMuted() {\n    const muteButton = document.querySelector(\".audio__button__mute\");\n    if (sound._muted) {\n      muteButton.classList.add(\"audio__button__mute_active\");\n    } else {\n      muteButton.classList.remove(\"audio__button__mute_active\");\n    }\n  }\n  onDestroy(() => {\n    clearInterval(intervalId);\n    sound.unload();\n  });\n  if ($$props.data === void 0 && $$bindings.data && data !== void 0) $$bindings.data(data);\n  return `<section class=\"audio\"><div class=\"audio__player-box\">${validate_component(LinkAnimated, \"LinkAnimated\").$$render(\n    $$result,\n    {\n      link: \"/video/\" + data.post.slug,\n      name: \"Далее\"\n    },\n    {},\n    {}\n  )} <button class=\"audio__button__play\"></button> <input class=\"audio__input__range audio__input__range_time\" type=\"range\" min=\"0\" max=\"1\" step=\"0.01\"${add_attribute(\"value\", currentTime / duration, 0)}> <span class=\"audio__time\">${escape(getCurrentTimeToFormat(currentTime))} / ${escape(getCurrentTimeToFormat(duration))}</span> <button class=\"audio__button__mute\"></button> <input class=\"audio__input__range audio__input__range_volume\" type=\"range\" min=\"0\" max=\"1\" step=\"0.01\"${add_attribute(\"value\", volume, 0)}></div></section>`;\n});\nexport {\n  Page as default\n};\n"],"names":[],"mappings":"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"}